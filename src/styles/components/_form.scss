// _forms.scss
@use 'sass:map';
@use '../utilities/variables' as *;
@use '../themes/theme' as Theme;

// Form Container Mixins
@mixin form-group {
  position: relative;
  margin-bottom: 1.5rem;
}

@mixin form-inline {
  display: flex;
  align-items: center;
  gap: 1rem;
}

// Label Mixins
@mixin form-label {
  position: absolute;
  left: 1rem;
  top: 50%;
  transform: translateY(-50%);
  transition: all 0.2s ease-in-out;
  color: var(--text-secondary);
  pointer-events: none;
  font-size: 1rem;
}

@mixin form-label-float {
  top: 0;
  font-size: 0.875rem;
  transform: translateY(-50%);
  background: var(--bg-primary);
  padding: 0 0.5rem;
}

// Input Mixins
@mixin form-input {
  width: 100%;
  padding: 0.85rem;
  border: 1px solid Theme.theme-color('border-color');
  border-radius: 0.5rem;
  background: Theme.theme-color('input-bg');
  color: var(--text-primary);
  font-size: 1rem;
  transition: all 0.2s ease-in-out;
  
  &:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.1);
  }
  
  &:not(:placeholder-shown) + label {
    @include form-label-float;
  }
  
  &:focus + label {
    @include form-label-float;
    color: var(--primary);
  }
}

// Validation Mixins
@mixin form-valid {
  border-color: var(--success);
  
  & + label {
    color: var(--success);
  }
}

@mixin form-invalid {
  border-color: var(--danger);
  
  & + label {
    color: var(--danger);
  }
}

// Select Mixins
@mixin form-select {
  @include form-input;
  appearance: none;
  background-image: url("data:image/svg+xml,..."); // todo: colored arrow svg
  background-repeat: no-repeat;
  background-position: right 1rem center;
  padding-right: 2.5rem;
}

// Checkbox & Radio Mixins
@mixin form-check {
  position: relative;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  user-select: none;
}

@mixin form-check-input {
  appearance: none;
  width: 1.25rem;
  height: 1.25rem;
  border: 2px solid var(--border-color);
  border-radius: 0.25rem;
  margin-right: 0.5rem;
  cursor: pointer;
  
  &:checked {
    background-color: var(--primary);
    border-color: var(--primary);
    background-image: url("data:image/svg+xml,..."); // todo: colored arrow svg
  }
}

// Classes
.form-group { @include form-group; }
.form-inline { @include form-inline; }
.form-label { @include form-label; }
.form-input { @include form-input; }
.form-select { @include form-select; }
.form-check { @include form-check; }
.form-check-input { @include form-check-input; }

// Validation Classes
.is-valid { @include form-valid; }
.is-invalid { @include form-invalid; }

// Sizes
@for $i from 0 through 5 {
  .form-input-#{$i} {
    @include form-input;
    padding: $i;
  }
}

// Dark Mode Support
// [data-theme="dark"] {
//   .form-input,
//   .form-select {
//     background-color: var(--bg-secondary);
//     border-color: var(--border-color-dark);
    
//     &:focus {
//       border-color: var(--primary-dark);
//     }
//   }
// }

// Accessibility
@media (prefers-reduced-motion: reduce) {
  .form-input,
  .form-label {
    transition: none;
  }
}