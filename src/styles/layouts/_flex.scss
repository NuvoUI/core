@use 'sass:math';
@use '../utilities/variables' as *;

// Flex Container Mixins
@mixin flex {display: flex;}
@mixin flex-inline {display: inline-flex;}

// Direction Mixins
@mixin row {flex-direction: row;}
@mixin row-reverse {flex-direction: row-reverse;}
@mixin col {flex-direction: column;}
@mixin col-reverse {flex-direction: column-reverse;}

// Wrap Mixins
@mixin wrap {flex-wrap: wrap;}
@mixin nowrap {flex-wrap: nowrap;}
@mixin wrap-reverse {flex-wrap: wrap-reverse;}

// Main Axis Alignment Mixins
@mixin start {justify-content: flex-start;}
@mixin end {justify-content: flex-end;}
@mixin center {justify-content: center;}
@mixin between {justify-content: space-between;}
@mixin around {justify-content: space-around;}
@mixin evenly {justify-content: space-evenly;}

// Cross Axis Alignment Mixins
@mixin align-start {align-items: flex-start;}
@mixin align-end {align-items: flex-end;}
@mixin align-center {align-items: center;}
@mixin align-stretch {align-items: stretch;}
@mixin align-baseline {align-items: baseline;}

// Self Alignment Mixins
@mixin self-auto {align-self: auto;}
@mixin self-start {align-self: flex-start;}
@mixin self-end {align-self: flex-end;}
@mixin self-center {align-self: center;}
@mixin self-stretch {align-self: stretch;}

// Flex Child Mixins
@mixin w-full {flex: 0 0 100%;}
@mixin w-auto {flex: 1 1 auto;}

// Base flex container
.flex {
  display: flex;
  
  // Direction modifiers
  &.row { flex-direction: row; }
  &.row-reverse { flex-direction: row-reverse; }
  &.col { flex-direction: column; }
  &.col-reverse { flex-direction: column-reverse; }
  
  // Wrap modifiers
  &.wrap { flex-wrap: wrap; }
  &.nowrap { flex-wrap: nowrap; }
  &.wrap-reverse { flex-wrap: wrap-reverse; }
  
  // Justify modifiers
  &.start { justify-content: flex-start; }
  &.end { justify-content: flex-end; }
  &.center { justify-content: center; }
  &.between { justify-content: space-between; }
  &.around { justify-content: space-around; }
  &.evenly { justify-content: space-evenly; }
  
  // Align modifiers
  &.items-start { align-items: flex-start; }
  &.items-end { align-items: flex-end; }
  &.items-center { align-items: center; }
  &.items-baseline { align-items: baseline; }
  &.items-stretch { align-items: stretch; }
  
  // Gap modifiers
  @for $i from 0 through 8 {
    &.gap-#{$i} { gap: #{$i * 0.25}rem; }
  }
  
  // Child flex items (using column count)
  > .w-auto { flex: 1 1 auto; }
  > .w-full { flex: 0 0 100%; }
  
  @for $i from 1 through $column-count {
    > .w-#{$i} {
      flex: 0 0 math.percentage( math.div($i, $column-count));
    }
  }
}


// Responsive variants
@each $breakpoint, $width in $breakpoints {
  @media (min-width: $width) {
    .#{$breakpoint}\: {
      // Direction
      &row { flex-direction: row; }
      &row-reverse { flex-direction: row-reverse; }
      &col { flex-direction: column; }
      &col-reverse { flex-direction: column-reverse; }
      
      // Wrap
      &wrap { flex-wrap: wrap; }
      &nowrap { flex-wrap: nowrap; }
      &wrap-reverse { flex-wrap: wrap-reverse; }
      
      // Justify
      &start { justify-content: flex-start; }
      &end { justify-content: flex-end; }
      &center { justify-content: center; }
      &between { justify-content: space-between; }
      &around { justify-content: space-around; }
      &evenly { justify-content: space-evenly; }
      
      // Align
      &items-start { align-items: flex-start; }
      &items-end { align-items: flex-end; }
      &items-center { align-items: center; }
      &items-baseline { align-items: baseline; }
      &items-stretch { align-items: stretch; }
      
      // Width (using column count)
      &w-auto { flex: 1 1 auto; }
      &w-full { flex: 0 0 100%; }
      
      @for $i from 1 through $column-count {
        &w-#{$i} {
          flex: 0 0 math.percentage(math.div($i, $column-count));
        }
      }
      
      // Gap
      @for $i from 0 through 8 {
        &gap-#{$i} { gap: #{$i * 0.25}rem; }
      }
    }
  }
}